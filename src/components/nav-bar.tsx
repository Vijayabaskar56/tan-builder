import { useQuery } from "@tanstack/react-query";
import { Link } from "@tanstack/react-router";
import { ModeToggle } from "@/components/mode-toggle";
import { Button } from "@/components/ui/button";
import AppToggle from "./app-toggle";
import { GithubButton } from "./ui/github-button";

export default function NavBar() {
	const { data: stars } = useQuery({
		queryKey: ["github-stars"],
		queryFn: async () => {
			const res = await fetch(
				"https://api.github.com/repos/Vijayabaskar56/tancn",
			);
			const data = await res.json();
			return data.stargazers_count;
		},
		enabled: import.meta.env.PROD,
	});

	return (
		<header className="fixed top-0 left-0 right-0 z-100 bg-background border-b px-4 md:px-6">
			<div className="flex h-12 items-center justify-between gap-4">
				{/* Left side */}
				<div className="flex flex-1 items-center gap-2">
					<div className="mr-4 flex">
						<Link to="/">
						<h1 className="font-bold text-2xl">TANCN</h1>
						{/* <svg width="100" height="40" viewBox="0 0 1669 576" fill="none" xmlns="http://www.w3.org/2000/svg">
											<title>TanCN Logo</title>
											<path className="fill-primary" d="M1124.22 101.584C1127.07 100.951 1129.93 100.44 1132.79 100L1105.87 126.756C1094.92 131.081 1084.49 136.535 1074.28 142.739C1064.14 148.904 1054.44 155.22 1045.64 163.155C1032.57 174.956 1022.58 189.299 1013.86 204.281C1004.89 219.717 999.129 237.706 996.346 255.162C993.617 272.286 993.167 290.291 996.294 307.43C1000.2 328.857 1007.64 348.964 1019.39 367.561C1023.34 365.777 1026.14 361.71 1029.41 358.97C1036.02 353.437 1042.96 348.309 1050.42 343.884C1053.18 342.246 1056.01 340.974 1059.01 339.808C1060.14 339.368 1061.99 338.967 1062.52 337.765C1063.37 335.856 1061.8 332.535 1061.53 330.557C1060.77 324.902 1060.3 319.15 1060.45 313.443C1060.87 296.822 1064.08 279.97 1070.19 264.413C1074.8 252.691 1081.83 242.048 1090.17 232.497C1093 229.255 1096 226.239 1099.11 223.246C1100.94 221.477 1103.22 219.964 1104.36 217.695C1098.37 217.699 1092.39 219.368 1086.7 221.064C1074.44 224.716 1062.49 230.135 1052.33 237.781C1047.69 241.269 1044.29 245.841 1039.91 249.512C1038.56 250.638 1036.15 252.148 1034.3 251.298C1031.49 250.015 1031.92 244.668 1031.6 242.21C1030.36 232.757 1034.06 220.801 1038.77 212.607C1046.32 199.453 1060.28 188.222 1076.67 188.614C1083.75 188.783 1089.95 191.164 1096.72 192.717C1095 190.358 1092.7 188.638 1090.51 186.704C1085.15 181.965 1079.29 177.637 1072.85 174.363C1070.26 173.046 1067.47 172.246 1064.74 171.278C1063.36 170.792 1061.63 170.123 1061.11 168.644C1060.16 165.905 1065.25 163.369 1067.12 162.214C1074.36 157.749 1083.24 154.077 1091.95 153.87C1105.56 153.547 1118.86 160.854 1124.46 173.29C1126.44 177.661 1127.02 182.284 1127.41 186.95L1127.48 187.825L1127.58 189.139C1127.59 189.285 1127.6 189.431 1127.61 189.577L1127.68 190.453L1127.75 191.33C1132.02 187.958 1135.03 182.995 1139.2 179.384C1148.97 170.937 1162.33 167.187 1175 170.989C1186.46 174.425 1196.42 182.075 1202.28 192.255C1203.81 194.918 1208.09 201.428 1205 204.08C1202.58 206.157 1199.51 204.539 1196.96 203.677C1195.03 203.025 1193.03 202.612 1191.03 202.229L1189.94 202.022C1189.57 201.953 1189.21 201.884 1188.85 201.813C1181.91 200.468 1173.84 200.607 1166.89 201.79C1162.39 202.555 1158 204.102 1153.52 204.744V205.669C1165.77 205.767 1177.61 212.526 1183.66 222.783C1186.16 227.032 1187.41 231.896 1188.37 236.66C1189.55 242.547 1188.72 248.961 1187.06 254.699C1186.5 256.623 1185.49 259.884 1183.11 260.327C1181.43 260.64 1180 259.022 1179.04 257.93C1176.53 255.069 1174.14 252.348 1171.19 249.877C1163.72 243.627 1155.82 237.861 1147.8 232.302C1143.53 229.35 1138.86 225.512 1133.95 223.708C1135.33 226.927 1136.69 229.919 1137.16 233.422C1138.54 243.725 1134.08 253.424 1127.39 261.175C1125.34 263.54 1123.16 265.923 1120.59 267.761C1119.52 268.523 1118.18 269.518 1116.77 269.303C1112.34 268.626 1111.81 262.17 1111.14 258.862C1108.84 247.659 1109.76 236.531 1112.95 225.558C1110.11 226.951 1108.06 229.997 1106.28 232.497C1102.36 237.996 1098.96 243.812 1096.52 250.074C1086.8 275.014 1086.9 304.226 1099.48 328.236C1100.89 330.917 1103.02 330.557 1105.79 330.557C1106.21 330.557 1106.62 330.555 1107.04 330.551L1108.3 330.539C1110.81 330.513 1113.33 330.503 1115.81 330.824C1117.1 330.99 1118.89 330.842 1119.92 331.761C1121.14 332.863 1120.49 334.752 1120.2 336.108C1119.42 339.898 1119.15 343.343 1119.15 347.209C1124.38 346.426 1125.83 338.321 1127.68 334.258C1129.78 329.655 1131.91 325.047 1133.86 320.381C1134.81 318.088 1136.09 315.524 1135.75 312.98C1135.38 310.122 1133.24 307.092 1131.76 304.654C1128.94 300.041 1125.74 295.294 1123.67 290.315C1122.01 286.335 1123.55 281.361 1128.22 279.939C1130.8 279.155 1133.55 280.693 1135.23 282.496C1138.74 286.273 1141.01 291.895 1143.57 296.329L1163.48 331.02C1165.17 333.958 1166.87 336.892 1168.6 339.808C1169.27 340.946 1169.96 342.703 1171.34 343.188C1172.57 343.62 1174.26 343.006 1175.48 342.769C1178.66 342.153 1181.84 341.487 1185.03 340.93C1188.85 340.261 1194.68 340.387 1197.44 337.496C1193.41 336.26 1188.75 336.333 1184.55 336.612C1182.03 336.779 1179.24 337.651 1176.92 336.227C1173.47 334.108 1171.18 329.212 1169.07 325.932C1163.87 317.843 1158.97 309.632 1154 301.417L1153.2 300.109L1151.6 297.495C1150.8 296.187 1150 294.876 1149.23 293.553C1148.64 292.53 1147.76 291.182 1148.61 290.054C1149.51 288.869 1151.46 288.799 1153.22 288.797L1153.57 288.797C1154.26 288.798 1154.91 288.799 1155.43 288.732C1162.54 287.827 1169.74 287.078 1176.91 287.078C1176.36 285.2 1174.76 283.077 1175.27 281.066C1176.41 276.567 1183.1 275.16 1186.21 278.388C1188.3 280.555 1189.52 283.538 1190.87 286.152C1192.67 289.604 1194.71 292.941 1196.63 296.329C1199.99 302.259 1203.66 308.026 1207.12 313.905C1207.41 314.39 1207.7 314.873 1208 315.355L1208.44 316.078C1209.93 318.488 1211.43 320.915 1212.24 323.619C1200.23 323.088 1191.22 309.603 1185.98 300.492C1185.57 301.95 1186.24 303.253 1186.79 304.654C1187.91 307.566 1189.26 310.339 1190.96 312.98C1193.38 316.752 1196.16 320.636 1199.83 323.374C1206.33 328.233 1214.91 328.26 1222.74 327.741C1227.76 327.407 1234.03 325.196 1238.97 326.696C1243.9 328.194 1245.88 333.454 1242.95 337.495C1240.76 340.522 1237.83 341.665 1234.19 342.121C1236.77 347.463 1240.14 352.421 1242.58 357.848C1243.6 360.109 1244.66 363.574 1247.1 364.767C1248.73 365.56 1251.05 364.821 1252.81 364.786C1251.05 360.274 1247.75 356.446 1246.13 351.835C1251.07 352.053 1255.85 354.548 1260.45 356.14C1269.5 359.272 1278.43 362.696 1287.36 366.151L1291.48 367.746C1295.15 369.169 1298.84 370.577 1302.45 372.123C1303.78 372.689 1304.76 373.445 1306.49 374.005L1326.23 383.796C1311.56 404.946 1292.4 423.009 1270.41 437.174C1246.2 452.764 1217.89 462.306 1189.08 465.685C1152.42 469.986 1112.78 463.701 1079.82 447.35C1017.94 416.653 975.872 354.872 975.04 287.168C974.88 274.114 975.09 260.983 977.761 248.057C982.111 227.005 989.696 206.655 1001.09 188.183C1013.41 168.2 1029.32 150.566 1048.38 136.349C1070.74 119.677 1096.71 107.685 1124.22 101.584ZM1087.65 405.414C1079.13 406.298 1070.14 407.798 1062.83 412.429C1064.47 412.812 1066.36 412.432 1068.08 412.429C1072.2 412.422 1076.37 412.272 1080.49 412.447C1090.81 412.885 1101.56 414.482 1111.52 417.125C1124.27 420.509 1135.51 427.168 1147.8 431.659C1160.76 436.397 1173.66 437.869 1187.41 437.869C1194.34 437.869 1201.22 437.849 1207.94 436.019C1204.43 434.212 1199.41 434.551 1195.53 433.799C1187.1 432.165 1178.81 430.171 1170.71 427.373C1164.74 425.313 1158.99 422.771 1153.27 420.175L1149.6 418.503C1144.29 416.089 1138.97 413.707 1133.48 411.7C1119.04 406.424 1103.04 403.817 1087.65 405.414ZM1100.54 370.337C1083.65 370.337 1066.57 373.215 1051.37 380.628C1047.69 382.424 1044.19 384.563 1040.87 386.935C1039.86 387.658 1038.07 388.587 1037.69 389.843C1037.31 391.118 1038.67 392.186 1039.44 393.002C1043.24 391.042 1046.85 388.968 1050.89 387.481C1077.06 377.862 1108.79 379.878 1134.91 388.698C1147.93 393.096 1159.93 399.673 1172.62 404.832C1186.8 410.601 1201.3 414.341 1216.53 416.26C1234.51 418.521 1255 416.688 1271.43 408.841C1277.2 406.084 1285.22 401.882 1287.66 395.777C1284.64 396.032 1281.93 397.282 1279.06 398.143C1274.51 399.513 1269.9 400.675 1265.22 401.582C1249.36 404.656 1232.5 405.291 1216.53 402.501C1201.48 399.872 1187.5 394.591 1173.58 389.036L1171.81 388.326C1170.62 387.852 1169.44 387.376 1168.25 386.901L1166.48 386.188C1159.37 383.339 1152.23 380.524 1144.93 378.059C1130.75 373.271 1115.56 370.337 1100.54 370.337ZM1208.42 349.35C1198.27 351.911 1187.8 354.232 1177.39 355.535C1178.76 360.046 1182.11 364.435 1184.56 368.486C1185.5 370.053 1186.52 372.151 1188.39 372.831C1190.5 373.599 1193.06 372.353 1195.05 371.724C1194.13 369.279 1192.57 367.079 1191.3 364.786C1190.78 363.841 1189.97 362.721 1190.4 361.599C1191.22 359.477 1194.61 359.602 1196.48 359.234C1201.43 358.262 1206.33 357.05 1211.28 356.09C1213.11 355.736 1215.65 354.778 1217.48 355.37C1218.85 355.813 1219.68 356.908 1220.46 358.049L1220.81 358.564C1221.28 359.249 1221.76 359.918 1222.36 360.441C1224.36 362.19 1227.36 362.458 1229.9 362.936C1228.35 359.559 1225.77 356.605 1224.12 353.222C1223.16 351.255 1222.37 348.361 1220.26 347.224C1217.37 345.658 1211.38 348.603 1208.42 349.35ZM1144.45 326.857C1143.98 332.721 1142.12 337.492 1139.2 342.584C1142.54 342.993 1145.95 343.138 1149.23 343.925C1151.69 344.514 1153.95 345.638 1156.39 346.284C1155.08 342.834 1152.67 339.757 1150.79 336.57C1148.9 333.354 1147.21 329.446 1144.45 326.857Z" fill="#CC9C42" />
											<path className="fill-secondary-foreground" d="M16.3352 169.771V111.455H291.094V169.771H188.672V446H118.757V169.771H16.3352ZM353.127 446H277.331L392.821 111.455H483.972L599.299 446H523.503L439.703 187.903H437.09L353.127 446ZM348.39 314.501H527.424V369.714H348.39V314.501ZM919.387 111.455V446H858.294L712.747 235.439H710.297V446H639.565V111.455H701.639L846.042 321.852H848.983V111.455H919.387Z" fill="white" />
											<path className="fill-secondary-foreground" d="M1641.04 111.455V446H1579.95L1434.4 235.439H1431.95V446H1361.22V111.455H1423.29L1567.7 321.852H1570.64V111.455H1641.04Z" fill="white" />
							</svg> */}
						</Link>
					</div>
				</div>
				{/* Middle area */}
				<AppToggle />
				{/* Right side */}
				<div className="flex flex-1 items-center justify-end gap-2">
					<GithubButton
						initialStars={0}
						targetStars={stars ?? 100}
						separator={true}
						label=""
						roundStars={true}
						repoUrl="https://github.com/Vijayabaskar56/tancn"
						variant="outline"
					/>
					<Button
						size="sm"
						variant="ghost"
						className="text-sm max-sm:aspect-square max-sm:p-0"
						asChild
					>
						<a
							href="https://www.linkedin.com/in/vijaya-baskar/"
							target="_blank"
							rel="noopener noreferrer"
						>
							<svg
								width="16"
								height="16"
								viewBox="0 0 24 24"
								fill="none"
								xmlns="http://www.w3.org/2000/svg"
								aria-label="LinkedIn"
							>
								<title>LinkedIn</title>
								<path
									d="M20.5 2h-17A1.5 1.5 0 002 3.5v17A1.5 1.5 0 003.5 22h17a1.5 1.5 0 001.5-1.5v-17A1.5 1.5 0 0020.5 2zM8 19H5v-9h3zM6.5 8.25A1.75 1.75 0 118.3 6.5a1.78 1.78 0 01-1.8 1.75zM19 19h-3v-4.74c0-1.42-.6-1.93-1.38-1.93A1.74 1.74 0 0013 14.19a.66.66 0 000 .14V19h-3v-9h2.9v1.3a3.11 3.11 0 012.7-1.4c1.55 0 3.36.86 3.36 3.66z"
									fill="currentColor"
								/>
							</svg>
						</a>
					</Button>
					<Button
						size="sm"
						variant="ghost"
						className="text-sm max-sm:aspect-square max-sm:p-0"
						asChild
					>
						<a
							href="https://x.com/vijayabaskar56"
							target="_blank"
							rel="noopener noreferrer"
						>
							<svg
								width="16"
								height="16"
								viewBox="0 0 24 24"
								fill="none"
								xmlns="http://www.w3.org/2000/svg"
								aria-label="Twitter"
							>
								<title>Twitter</title>
								<path
									d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"
									fill="currentColor"
								/>
							</svg>
						</a>
					</Button>
					<ModeToggle />
				</div>
			</div>
		</header>
	);
}
